<div class="coordinator-detail">
  <p-toast></p-toast>
  
  <!-- Header Section -->
  <div class="coordinator-detail__header">
    <div class="coordinator-detail__header-content">
      <div class="coordinator-detail__header-title">
        <i class="pi pi-users coordinator-detail__header-icon"></i>
        <h1 class="coordinator-detail__title">Panel Assignment</h1>
      </div>
      <p class="coordinator-detail__subtitle">
        Assign candidates to interview panels for scheduled assessments
      </p>
    </div>
  </div>

  <!-- Selection Summary Cards -->
  <div class="coordinator-detail__summary">
    <p-card class="coordinator-detail__summary-card">
      <div class="coordinator-detail__summary-content">
        <div class="coordinator-detail__summary-item">
          <div class="coordinator-detail__summary-icon candidate">
            <i class="pi pi-user"></i>
          </div>
          <div class="coordinator-detail__summary-info">
            <span class="coordinator-detail__summary-label">Selected Candidate</span>
            <span class="coordinator-detail__summary-value">
              @if (selectedCandidatesIds.length > 0) {
                {{ selectedCandidatesIds[0].name }}
              } @else {
                <span class="coordinator-detail__summary-placeholder">None selected</span>
              }
            </span>
          </div>
        </div>
        
        <p-divider layout="vertical" [style]="{ height: '40px', margin: '0 1.5rem' }"></p-divider>
        
        <div class="coordinator-detail__summary-item">
          <div class="coordinator-detail__summary-icon panel">
            <i class="pi pi-briefcase"></i>
          </div>
          <div class="coordinator-detail__summary-info">
            <span class="coordinator-detail__summary-label">Selected Panel</span>
            <span class="coordinator-detail__summary-value">
              @if (selectedPanelIds.length > 0) {
                {{ selectedPanelIds[0].panelName }}
              } @else {
                <span class="coordinator-detail__summary-placeholder">None selected</span>
              }
            </span>
          </div>
        </div>
        
        <div class="coordinator-detail__summary-actions">
          <p-button
            label="Schedule Panel"
            icon="pi pi-calendar-plus"
            [disabled]="selectedCandidatesIds.length === 0 || selectedPanelIds.length === 0"
            (onClick)="schedule()"
            [style]="{ minWidth: '180px' }"
            severity="primary"
          ></p-button>
        </div>
      </div>
    </p-card>
  </div>

  <!-- Main Content Layout -->
  <div class="coordinator-detail__view">
    <div class="coordinator-detail__view__content">
      <div class="coordinator-detail__schedule-layout">
        <!-- Candidates Section -->
        <div class="coordinator-detail__schedule-layout__left">
          <p-card class="coordinator-detail__card">
            <ng-template pTemplate="header">
              <div class="coordinator-detail__card-header">
                <div class="coordinator-detail__card-header-content">
                  <i class="pi pi-users coordinator-detail__card-icon"></i>
                  <div>
                    <h2 class="coordinator-detail__card-title">Candidates</h2>
                    <p class="coordinator-detail__card-subtitle">
                      Select a candidate to assign to a panel
                    </p>
                  </div>
                </div>
              </div>
            </ng-template>
            <app-table
              [tableData]="data"
              [columnsData]="candidateColumn"
              heading="Candidate List"
              [hasSearch]="true"
              [parentLoader]="isCandidateLoading"
              (pageChangeAndSort)="onTablePayloadChange($event)"
              (selectedIds)="getSelectedcandidateId($event)"
            ></app-table>
          </p-card>
        </div>

        <!-- Divider -->
        <p-divider layout="vertical" [style]="{ margin: '0 1rem' }"></p-divider>

        <!-- Panels Section -->
        <div class="coordinator-detail__schedule-layout__right">
          <p-card class="coordinator-detail__card">
            <ng-template pTemplate="header">
              <div class="coordinator-detail__card-header">
                <div class="coordinator-detail__card-header-content">
                  <i class="pi pi-briefcase coordinator-detail__card-icon"></i>
                  <div>
                    <h2 class="coordinator-detail__card-title">Available Panels</h2>
                    <p class="coordinator-detail__card-subtitle">
                      Select a panel to assign to the candidate
                    </p>
                  </div>
                </div>
              </div>
            </ng-template>
            <app-table
              [tableData]="panelData"
              [columnsData]="panelColumn"
              heading="Panel List"
              [hasSearch]="true"
              [parentLoader]="isPanelLoading"
              (edit)="editPanel($event)"
              (pageChangeAndSort)="onPanelTablePayloadChange($event)"
              (selectedIds)="getSelectedPanelId($event)"
              [alreadySelected]="selectedPanel"
            ></app-table>
          </p-card>
        </div>
      </div>
    </div>
  </div>
</div>
