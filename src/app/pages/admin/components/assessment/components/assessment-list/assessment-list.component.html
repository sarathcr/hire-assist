<div class="assessment-list">
  <div>
    <div class="assessment-list__header">
      <h1 class="assessment-list__title">Recruitments</h1>
      <div class="assessment-list__actions">
        <app-search-bar
          [placeholder]="'Search Recruitments...'"
          (search)="onSearch($event)"
          class="assessment-list__search-bar"
        >
        </app-search-bar>
        <app-button
          class="assessment-list__button"
          [icon]="'pi pi-plus'"
          [buttonLabel]="'Create'"
          (btnClick)="onCreateAssessment()"
          buttonSize="small"
        ></app-button>
      </div>
    </div>

    <div class="assessment-list__wrapper">
      @if (isInitialLoad || isLoading || (isLoading$ | async)) {
        <div class="assessment-list__list">
          @for (item of [1, 2, 3, 4, 5, 6]; track item) {
            <app-assessment-card-skeleton
              class="assessment-list__card"
            ></app-assessment-card-skeleton>
          }
        </div>
      } @else {
        <div
          [ngClass]="{
            'assessment-list__list': assessmentDataSource.length > 0,
          }"
        >
          @for (assessment of assessmentDataSource; track assessment) {
            <app-assessment-card
              class="assessment-list__card"
              [data]="assessment"
              (edit)="onEditAssessment($event)"
              (duplicate)="onDuplicateAssessment($event)"
              (delete)="onDeleteAssessment($event)"
              (schedule)="onScheduleAssessment($event)"
              (click)="onClickAssessment(assessment.id ?? 0)"
              (keydown)="onClickAssessment(assessment.id ?? 0)"
            ></app-assessment-card>
          }

          @if (assessmentDataSource.length === 0 && totalRecords === 0) {
            <app-empty-state message="No recruitments found"> </app-empty-state>
          }
        </div>
      }
    </div>
  </div>

  <app-pagination
    [dataSource]="dataSource"
    [filterMap]="filterMap"
    [totalRecords]="totalRecords"
    [isLoading]="isInitialLoad || isLoading || ((isLoading$ | async) ?? false)"
  >
  </app-pagination>
</div>
<p-toast />
