<div class="assessment-detail">
  <!-- Header Section -->
  <div class="assessment-detail__header">
    @if (data) {
      <h1 class="assessment-detail__title">{{ data.name }}</h1>
    } @else {
      <p-skeleton width="18rem" height="2rem" />
    }
  </div>

  <!-- Unified Content Section -->
  <div class="assessment-detail__section">
    <!-- Rounds Selector -->
    <div class="assessment-detail__rounds-selector">
      @if (step && step.length > 0) {
        <div class="rounds-tabs">
          @for (stepHeader of step; track stepHeader.id; let i = $index) {
            <button
              type="button"
              class="rounds-tab"
              [ngClass]="{ 
                'rounds-tab--active': i === activeMenuItemIndex,
                'rounds-tab--completed': stepHeader.status === 'Completed'
              }"
              (click)="setActiveMenuItem(i, stepHeader.id, stepHeader.status)"
              (keydown.enter)="setActiveMenuItem(i, stepHeader.id, stepHeader.status)"
              (keydown.space)="setActiveMenuItem(i, stepHeader.id, stepHeader.status)"
              tabindex="0"
            >
              <span class="rounds-tab__label">{{ stepHeader.round }}</span>
              @if (stepHeader.status === 'Completed') {
                <i class="pi pi-check-circle rounds-tab__icon"></i>
              }
            </button>
          }
        </div>
      } @else {
        <div class="rounds-tabs">
          @for (item of [1, 2, 3]; track item) {
            <p-skeleton width="120px" height="2.5rem" styleClass="rounds-tab-skeleton" />
          }
        </div>
      }
    </div>

    <!-- Candidates Table -->
    <div class="assessment-detail__table-container">
      <app-table
        [tableData]="tableData"
        [columnsData]="columns"
        [hasView]="true"
        [hasRowEdit]="false"
        [hasSearch]="true"
        [parentLoader]="isLoading"
        (selectedIds)="getSelectedCandidatesOnTable($event)"
        (delete)="deleteCandidate($event)"
        (view)="onView($event)"
        (pageChangeAndSort)="onTablePayloadChange($event)"
      >
        <div class="assessment-detail__actions">
          <p-button
            icon="pi pi-calendar-plus"
            pTooltip="Schedule Interview"
            tooltipPosition="bottom"
            [outlined]="true"
            (onClick)="schedule()"
          />
          <p-button
            icon="pi pi-user-plus"
            pTooltip="Assign Candidate to Panel"
            tooltipPosition="bottom"
            severity="warn"
            [outlined]="true"
            (onClick)="OnPanelClick()"
          />
          <p-button
            icon="pi pi-check-square"
            pTooltip="Select Candidate"
            severity="success"
            tooltipPosition="bottom"
            [outlined]="true"
            (onClick)="selectCandidate()"
          />
          <p-button
            icon="pi pi-ban"
            severity="danger"
            pTooltip="Reject Candidate"
            tooltipPosition="bottom"
            [outlined]="true"
            (onClick)="rejectCandidate()"
          />
        </div>
      </app-table>
    </div>

    <!-- Complete Button -->
    <div class="assessment-detail__footer">
      <app-button
        [disabled]="roundStatus"
        [buttonSize]="'small'"
        [buttonLabel]="'Complete Round'"
        [buttonVariant]="'outlined'"
        [isLoading]="!tableData"
        (btnClick)="CompleteAssessmentRound()"
      ></app-button>
    </div>
  </div>

  <p-toast position="top-right" class="Toast"></p-toast>
</div>
